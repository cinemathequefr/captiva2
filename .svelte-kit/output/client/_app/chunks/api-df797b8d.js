var g=Object.defineProperty;var i=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;var p=(t,e,o)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,u=(t,e)=>{for(var o in e||(e={}))h.call(e,o)&&p(t,o,e[o]);if(i)for(var o of i(e))m.call(e,o)&&p(t,o,e[o]);return t};var d=(t,e)=>{var o={};for(var n in t)h.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&i)for(var n of i(t))e.indexOf(n)<0&&m.call(t,n)&&(o[n]=t[n]);return o};import{t as y}from"./Form-d0ca5f65.js";function T(t,e,c={}){var s=c,{signal:o}=s,n=d(s,["signal"]);const r=new AbortController,a=fetch(t,u({signal:r.signal},n));o&&o.addEventListener("abort",()=>r.abort());const w=setTimeout(()=>r.abort(),e);return a.finally(()=>clearTimeout(w))}function b(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return e.join("&")}let f;y.subscribe(t=>{f=t});const $=new AbortController,k="https://api.cnmtq.fr",C=1e4;async function l({method:t,path:e,data:o}){const n={method:t,headers:{}};let c="",s;o&&(n.headers["Content-Type"]="application/json",t==="GET"?c=`?${b(o)}`:n.body=JSON.stringify(o)),f&&(n.headers.Authorization=`Bearer ${f}`);try{let r=await T(`${k}/${e}${c}`,C,u({signal:$.signal},n)),a=r.headers.get("content-type");if(s=a&&a.indexOf("application/json")!==-1?await r.json():await r.text(),r.ok===!1)throw typeof s=="string"?{status:r.status,message:s,success:r.ok}:s;return s}catch(r){throw r.message==="The operation was aborted. "||r.message==="NetworkError when attempting to fetch resource."?new Error("Le serveur ne r\xE9pond pas."):r}}function O(t,e){return l({method:"GET",path:t,data:e})}function j(t,e){return l({method:"POST",path:t,data:e})}function x(t,e){return l({method:"PUT",path:t,data:e})}export{j as a,O as g,x as p};
